Metadata-Version: 2.1
Name: saml-app-config-cfn
Version: 0.0.1
Summary: SAML App Configuration CloudFormation Stack Deployment
Home-page: UNKNOWN
Author: Charlene Leong
License: UNKNOWN
Description: # SAML 2.0 Application Configuration
        
        
        
        This CloudFormation template creates a SAML identity provider (IdP) and SAML Federated User with Administrator Access in Amazon Web Services' (AWS) Identity and Access Management (IAM) configuration.
        
        In order to use it, you'll need:
        
        - an AWS account
        - rights within that AWS account to create, update, and delete:
            - CloudFormation stacks
            - IAM Roles and Policies
            - Lambda functions
            - Identity Providers
        - a SAML Identity Provider (IdP)
        - the Federation metadata (an XML document) from the Identity Provider (how to get this differs for every IdP)
        
        ## Create virtualenv
        
          $ python -m venv .venv
          $ source .venv/bin/activate 
        
        ## Install dependencies
        
          $ pip install -r requirements-dev.txt
          
        
        ## Preparing metadata
        
        Please use the [`xml_to_params.sh`](./xml_to_params.sh) script to generate `params.json` which will transform the XML metadata file to single-line JSON format to create the SamlIdentityProvider. 
        
          $ xml_to_params.sh 
        
        ## Configuration
        
        You can set the name of your identity provider via the `SamlProviderName` and `SamlApp` parameters in the stack
        
        ## Returned Values from the Custom Resource
        
        The `ProviderCreator` custom resource returns the ARN of the SAML provider as its physical resource ID.
        
        You can simply `Ref` the custom resource to use the SAML provider ARN.
        
        For example:
        
        ```yaml
        ...
        
          TrustingIdp:
            Type: AWS::IAM::Role
            Properties:
              AssumeRolePolicyDocument:
                Version: '2012-10-17'
                Statement:
                  - Effect: Allow
                    Principal:
                      Federated: !Ref IdentityProvider
                    Action: sts:AssumeRoleWithSAML
                    Condition:
                      StringEquals:
                        "SAML:aud": "https://signin.aws.amazon.com/saml"
        ...
        ```
        
        ## Updating the stack
        
        The stack can be updated, though the only changes you can make to the Identity Provider is to change the SAML
        Metadata document, in case you need to update the trust relationship.
        
        $ aws cloudformation validate-template --template-body file://saml-app-config.yml
        $ aws cloudformation create-stack --stack-name  saml-app-configuration --template-body file://saml-app-config.yml --parameters file://params.json --capabilities CAPABILITY_NAMED_IAM
        $ aws cloudformation delete-stack --stack-name saml-app-configuration 
Platform: UNKNOWN
Classifier: Development Status :: Development
Classifier: Intended Audience :: Deloitte Cloud Engineering Operate
Classifier: Programming Language :: Python :: 3.7.5
Classifier: Topic :: Utilities
Classifier: Typing :: Typed
Requires-Python: >=3.7.5
Description-Content-Type: text/markdown
Provides-Extra: dev
